{% extends "base.html" %} {% block title %}P≈Çatno≈õƒá ‚Äì Rezerwacja #{{
reservation['reservation_id'] }}{% endblock %} {% block content %}

<div
  class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-4"
>
  <div>
    <h2 class="mb-1"><i class="bi bi-cash-coin"></i> Rejestracja p≈Çatno≈õci</h2>
    <p class="text-muted mb-0">
      Rezerwacja #{{ reservation['reservation_id'] }}
    </p>
  </div>
  <a
    href="{{ url_for('reservations_list') }}"
    class="btn btn-outline-secondary"
  >
    <i class="bi bi-arrow-left"></i> Powr√≥t do rezerwacji
  </a>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="card shadow mb-4">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0">
          <i class="bi bi-info-circle"></i> Szczeg√≥≈Çy rezerwacji
        </h5>
      </div>
      <div class="card-body">
        <table class="table table-borderless mb-0">
          <tr>
            <td class="text-muted">Go≈õƒá:</td>
            <td class="fw-bold">{{ reservation['guest_name'] }}</td>
          </tr>
          <tr>
            <td class="text-muted">Pok√≥j:</td>
            <td>
              <span class="badge bg-info"
                >{{ reservation['room_number'] }}</span
              >
            </td>
          </tr>
          <tr>
            <td class="text-muted">Status:</td>
            <td>
              {% if reservation['reservation_status'] == 'checked_in' %}
              <span class="badge bg-success">Zameldowany</span>
              {% elif reservation['reservation_status'] == 'confirmed' %}
              <span class="badge bg-warning">Potwierdzona</span>
              {% else %}
              <span class="badge bg-secondary"
                >{{ reservation['reservation_status'] }}</span
              >
              {% endif %}
            </td>
          </tr>
          <tr class="border-top">
            <td class="text-muted">Ca≈Çkowity koszt:</td>
            <td class="fw-bold fs-5">{{ reservation['total_cost'] }} PLN</td>
          </tr>
          <tr>
            <td class="text-muted">Zap≈Çacono:</td>
            <td class="text-success fw-bold">
              {{ "%.2f"|format(total_paid|float) }} PLN
            </td>
          </tr>
          <tr>
            <td class="text-muted">Pozosta≈Ço do zap≈Çaty:</td>
            <td
              class="{% if remaining > 0 %}text-danger{% else %}text-success{% endif %} fw-bold fs-5"
            >
              {{ "%.2f"|format(remaining|float) }} PLN
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card shadow">
      <div class="card-header bg-success text-white">
        <h5 class="mb-0">
          <i class="bi bi-credit-card"></i> Zarejestruj p≈Çatno≈õƒá
        </h5>
      </div>
      <div class="card-body">
        {% if remaining <= 0 %}
        <div class="alert alert-success">
          <i class="bi bi-check-circle-fill"></i> Rezerwacja w pe≈Çni op≈Çacona!
        </div>
        {% else %}
        <form method="POST">
          <div class="mb-3">
            <label for="amount" class="form-label">Kwota (PLN) *</label>
            <input type="number" step="0.01" min="0.01" max="{{ remaining }}"
            class="form-control form-control-lg" id="amount" name="amount"
            value="{{ "%.2f"|format(remaining|float) }}" required>
            <div class="form-text">
              Maksymalnie: {{ "%.2f"|format(remaining|float) }} PLN
            </div>
          </div>

          <div class="mb-4">
            <label for="payment_method" class="form-label"
              >Metoda p≈Çatno≈õci *</label
            >
            <select
              class="form-select form-select-lg"
              id="payment_method"
              name="payment_method"
              required
            >
              <option value="">-- Wybierz metodƒô --</option>
              <option value="card">üí≥ Karta p≈Çatnicza</option>
              <option value="cash">üíµ Got√≥wka</option>
              <option value="blik">üì± BLIK</option>
              <option value="bank_transfer">üè¶ Przelew bankowy</option>
            </select>
          </div>

          <div class="d-grid gap-2">
            <button type="submit" class="btn btn-success btn-lg">
              <i class="bi bi-check-lg"></i> Zarejestruj p≈Çatno≈õƒá
            </button>
          </div>
        </form>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% endblock %}
